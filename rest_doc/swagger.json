{"paths":{"/api/events":{"get":{"operationId":"searchEvents","tags":["events"],"summary":"Query all events by name, location, categories","parameters":[{"in":"query","name":"search","type":"string","required":false},{"in":"query","name":"location","type":"integer","format":"int32","required":false},{"in":"query","name":"category","type":"integer","format":"int32","required":false},{"in":"query","name":"sort","type":"string","required":false,"description":"Specifies wich column to sort by","default":"id"},{"in":"query","name":"sortDir","type":"boolean","required":true},{"in":"header","name":"X-Page","schema":{"type":"integer"},"default":0},{"in":"header","name":"X-Page-Size","schema":{"type":"integer"},"default":20}],"responses":{"200":{"description":"success","schema":{"$ref":"#/definitions/whatson.model.Event"}}}},"post":{"operationId":"createEvent","tags":["events"],"summary":"Create an event","parameters":[{"in":"body","name":"body","schema":{"$ref":"#/definitions/whatson.model.Event"}}],"responses":{"200":{"description":"success","schema":{"$ref":"#/definitions/whatson.model.Event"}}},"consumes":["application/json"]}},"/api/events/{id}":{"get":{"operationId":"getEvent","tags":["events"],"summary":"Query the event with a specific id","responses":{"200":{"description":"success","schema":{"$ref":"#/definitions/whatson.model.Event"}}},"parameters":[{"in":"path","name":"id","type":"integer","format":"int32","required":true}]},"delete":{"operationId":"deleteEvent","tags":["events"],"summary":"Delete an event","responses":{"200":{"description":"Event deleted"}},"parameters":[{"in":"path","name":"id","type":"integer","format":"int32","required":true}]},"put":{"operationId":"updateEvent","tags":["events"],"summary":"Update an event with a specific id","parameters":[{"in":"path","name":"id","type":"integer","format":"int32","required":true},{"in":"body","name":"body","schema":{"$ref":"#/definitions/whatson.model.Event"}}],"responses":{"200":{"description":"success","schema":{"$ref":"#/definitions/whatson.model.Event"}}},"consumes":["application/json"]}},"/api/user/{id}":{"get":{"operationId":"getUser","tags":["user"],"summary":"Query the user with a specific id","responses":{"200":{"description":"success","schema":{"$ref":"#/definitions/whatson.model.User"}}},"parameters":[{"in":"path","name":"id","type":"integer","format":"int32","required":true}]},"delete":{"operationId":"deleteUser","tags":["user"],"summary":"Delete an user","responses":{"200":{"description":"success"}},"parameters":[{"in":"path","name":"id","type":"integer","format":"int32","required":true}]},"put":{"operationId":"updateUser","tags":["user"],"summary":"Update an user with a specific id","responses":{"200":{"description":"success","schema":{"$ref":"#/definitions/whatson.model.User"}}},"parameters":[{"in":"path","name":"id","type":"integer","format":"int32","required":true}]}},"/api/user":{"post":{"operationId":"createUser","tags":["user"],"summary":"Create an user","parameters":[{"in":"body","name":"body","schema":{"$ref":"#/definitions/whatson.model.User"}}],"responses":{"200":{"description":"success","schema":{"$ref":"#/definitions/whatson.model.User"}}},"consumes":["application/json"]}},"/api/categories":{"get":{"operationId":"categories","tags":["api"],"summary":"Query all categories","responses":{"200":{"description":"success","schema":{"$ref":"#/definitions/whatson.model.detail.CategoryDetail"}}}}},"/api/location":{"get":{"operationId":"searchLocations","tags":["api"],"summary":"Search locations by name","parameters":[{"in":"query","name":"search","type":"string","required":false},{"in":"header","name":"X-Page","schema":{"type":"integer"}},{"in":"header","name":"X-Page-Size","schema":{"type":"integer"}}],"responses":{"200":{"description":"success","schema":{"$ref":"#/definitions/whatson.model.detail.LocationDetail"}}}},"post":{"operationId":"createLocation","tags":["api"],"summary":"Create a location","parameters":[{"in":"body","name":"body","schema":{"$ref":"#/definitions/whatson.model.Location"}}],"responses":{"200":{"description":"success","schema":{"$ref":"#/definitions/whatson.model.Location"}}},"consumes":["application/json"]}},"/api/location/{id}":{"get":{"operationId":"getLocation","tags":["api"],"summary":"Get a specific location","responses":{"200":{"description":"success","schema":{"$ref":"#/definitions/whatson.model.detail.LocationDetail"}}},"parameters":[{"in":"path","name":"id","type":"integer","format":"int32","required":true}]}},"/api/location/nearby/{id}":{"get":{"operationId":"getNearby","tags":["api"],"summary":"Get locations nearby a specific location","responses":{"200":{"description":"success","schema":{"$ref":"#/definitions/whatson.model.detail.LocationDetail"}}},"parameters":[{"in":"path","name":"id","type":"integer","format":"int32","required":true}]}},"/api/rating/{id}/{entityType}/{rate}":{"get":{"operationId":"rateEntity","tags":["api"],"summary":"Rate a specific entity","responses":{"200":{"description":"success","schema":{"$ref":"#/definitions/whatson.model.Rating"}}},"parameters":[{"in":"path","name":"id","type":"integer","format":"int32","required":true},{"in":"path","name":"entityType","type":"string","required":true},{"in":"path","name":"rate","type":"number","format":"float","required":true}]}},"/api/images/{id}":{"get":{"operationId":"get","tags":["api"],"summary":"Get a specific image","responses":{"200":{"description":"success"}},"parameters":[{"in":"path","name":"id","type":"integer","format":"int32","required":true}]}},"/api/images/bytes/{id}":{"get":{"operationId":"getBytes","tags":["api"],"summary":"Get bytes of a specific image","responses":{"200":{"description":"success"}},"parameters":[{"in":"path","name":"id","type":"integer","format":"int32","required":true}]}},"/api/images":{"post":{"operationId":"createImage","tags":["api"],"summary":"Create an image","parameters":[{"in":"body","name":"body","schema":{"$ref":"#/definitions/whatson.model.Image"}}],"responses":{"200":{"description":"success","schema":{"$ref":"#/definitions/whatson.model.Image"}}},"consumes":["application/json"]}},"/api/images/attach":{"get":{"operationId":"attachImage","tags":["api"],"summary":"Attach an image","responses":{"200":{"description":"success","schema":{"$ref":"#/definitions/whatson.model.ImageEntity"}}},"parameters":[{"in":"query","name":"id","type":"integer","format":"int32","required":true},{"in":"query","name":"entityType","type":"string","required":true},{"in":"query","name":"entityId","type":"integer","format":"int32","required":true}]}},"/assets/{file}":{"get":{"operationId":"versioned","tags":["routes"],"parameters":[{"in":"path","name":"file","type":"asset","required":true}]}}},"definitions":{"whatson.model.ImageEntity":{"properties":{"imageId":{"type":"integer","format":"int32"},"entityId":{"type":"integer","format":"int32"},"entityType":{"type":"string","enum":["Event","Location","User","Category"]}},"required":["imageId","entityId","entityType"]},"whatson.model.Rating":{"properties":{"id":{"type":"integer","format":"int32"},"rating":{"type":"number","format":"float"},"userId":{"type":"integer","format":"int32"},"entityId":{"type":"integer","format":"int32"},"entityType":{"type":"string","enum":["Event","Location","User","Category"]}},"required":["rating","userId","entityId","entityType"]},"whatson.model.detail.CategoryDetail":{"properties":{"id":{"type":"integer","format":"int32"},"name":{"type":"string"},"parentId":{"type":"integer","format":"int32"},"images":{"type":"array","items":{"type":"integer","format":"int32"}}},"required":["name","parentId","images"]},"whatson.model.Image":{"properties":{"id":{"type":"integer","format":"int32"},"name":{"type":"string"},"data":{"type":"array[byte]"}},"required":["name","data"]},"whatson.model.Location":{"properties":{"id":{"type":"integer","format":"int32"},"name":{"type":"string"},"latitude":{"type":"number","format":"float"},"longitude":{"type":"number","format":"float"}},"required":["name","latitude","longitude"]},"whatson.model.User":{"properties":{"id":{"type":"integer","format":"int32"},"name":{"type":"string"},"pwHash":{"type":"string"},"email":{"type":"string"}},"required":["name","pwHash","email"]},"whatson.model.Event":{"properties":{"id":{"type":"integer","format":"int32"},"name":{"type":"string"},"from":{"type":"java.sql.timestamp"},"to":{"type":"java.sql.timestamp"},"creatorId":{"type":"integer","format":"int32"},"locationId":{"type":"integer","format":"int32"}},"required":["name","from","to","locationId"]},"whatson.model.detail.LocationDetail":{"properties":{"id":{"type":"integer","format":"int32"},"name":{"type":"string"},"latitude":{"type":"number","format":"float"},"longitude":{"type":"number","format":"float"},"avgRating":{"type":"number","format":"float"},"images":{"type":"array","items":{"type":"integer","format":"int32"}}},"required":["name","latitude","longitude","images"]}},"swagger":"2.0","info":{"title":"WhatsOn API","description":"Search for events","version":"1.0.0"},"consumes":["application/json"],"produces":["application/json"],"tags":[{"name":"events"},{"name":"user"},{"name":"api"},{"name":"routes"}]}